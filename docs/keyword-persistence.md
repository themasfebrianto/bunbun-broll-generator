# Keyword Persistence

## Overview

AI-generated keywords are now persisted to the database when saving projects. Previously, keywords were lost when loading saved projects from history.

## Changes Made

### Database Schema

Added new columns to `Sentences` table:
- `KeywordsJson` (TEXT) - Serialized KeywordSet as JSON
- `SuggestedCategory` (TEXT) - AI-suggested content category
- `DetectedMood` (TEXT) - AI-detected mood/emotion

### ProjectService

- Updated `SaveJobAsProjectAsync()` to serialize KeywordSet to JSON
- Keywords are now saved along with sentences and selected videos

### Home.razor

- Updated `LoadSavedProject()` to deserialize KeywordSet from JSON
- Keywords are fully restored when loading saved projects

## Usage

No API changes required. Keywords are automatically persisted and restored:

1. Create a new project
2. Keywords are generated by AI
3. Save the project
4. Reload from history anytime - keywords are preserved

## Data Format

Keywords are stored as JSON using `System.Text.Json`:

```json
{
  "Primary": ["person walking", "city street"],
  "Mood": ["happy", "energetic"],
  "Contextual": ["urban", "daytime"],
  "Action": ["walking"],
  "Fallback": ["city skyline"],
  "SuggestedCategory": "Urban",
  "DetectedMood": "Happy"
}
```

## Migration

For existing databases, the columns will be added automatically on next application restart (development mode). Existing projects won't have keywords - they will be regenerated on next search.
